<!DOCTYPE html>
<html>
  <head>
    <script type="text/javascript">
      document.addEventListener("DOMContentLoaded", () => {
        let canvas = document.getElementById("canvas");
        let ctx = canvas.getContext("2d");
        // Set canvas size
        canvas.width = 700;
        canvas.height = 700;

        // Save the current context state
        ctx.save();

        function drawIsometricPlane() {
          // Reset the context state
          ctx.restore();
          ctx.save();
          // Clear the canvas
          ctx.clearRect(0, 0, canvas.width, canvas.height);

          // Apply isometric transformations
          ctx.scale(1, 0.5); // Scale height
          ctx.rotate((45 * Math.PI) / 180); // Rotate by 45 degrees
          ctx.translate(canvas.width, 11 * 20); // Move to center of canvas

          // Draw vertical grid lines
          for (var x = -canvas.width * 2; x <= canvas.width * 2; x += 20) {
            ctx.beginPath();
            ctx.moveTo(x, -1000);
            ctx.lineTo(x, canvas.width + 1000);
            ctx.stroke();
          }

          // Draw horizontal grid lines
          for (var y = -canvas.height * 2; y <= canvas.height * 2; y += 20) {
            ctx.beginPath();
            ctx.moveTo(-1000, y);
            ctx.lineTo(canvas.height + 1000, y);
            ctx.stroke();
          }
        }

        function drawIsoRect({
          x = 0,
          y = 0,
          l = 1,
          w = 1,
          h = 1,
          c = { top: "rgba(0, 0, 255, 1)", left: "rgba(255, 0, 0, 1)", right: "rgba(0, 255, 0, 1)" }
        } = {}) {
          // draw top (blue)
          ctx.beginPath();
          ctx.moveTo(x, y - h * 20);
          ctx.lineTo(x, y + 20 * w - h * 20);
          ctx.lineTo(x + 20 * l, y + 20 * w - h * 20);
          ctx.lineTo(x + 20 * l, y - h * 20);
          ctx.closePath();
          ctx.fillStyle = c.top;
          ctx.fill();
          ctx.stroke();

          // draw left (red)
          ctx.beginPath();
          ctx.moveTo(x, y + 20 * w - h * 20);  // Start at top-left
          ctx.lineTo(x + h * 20, y + 20 * w);  // Down and right to bottom-left
          ctx.lineTo(x + 20 * l + h * 20, y + 20 * w);  // Across to bottom-right
          ctx.lineTo(x + 20 * l, y + 20 * w - h * 20);  // Up and left to top-right
          ctx.closePath();
          ctx.fillStyle = c.left;
          ctx.fill();
          ctx.stroke();

          // draw right (green)
          ctx.beginPath();
          ctx.moveTo(x + 20 * l, y - h * 20);  // Start at top-left
          ctx.lineTo(x + 20 * l + h * 20, y);  // Down and right to bottom-left
          ctx.lineTo(x + 20 * l + h * 20, y + 20 * w);  // Down to bottom-right
          ctx.lineTo(x + 20 * l, y + 20 * w - h * 20);  // Up and left to top-right
          ctx.closePath();
          ctx.fillStyle = c.right;
          ctx.fill();
          ctx.stroke();
        }

        drawIsometricPlane();

        let growing = true;

        function draw() {
          drawIsometricPlane();
          {
            // draw leg 1
            drawIsoRect({x: 120, y:220, l:1, w:1,h: 3, c: { top: "red" }});
            // drawIsoRect({x: 80, y: 180, l: 1, w: 1, c: { top: "red" }});
            // drawIsoRect({x: 40, y: 140, l: 1, w: 1, c: { top: "red" }});
            // drawIsoRect({x: 0, y: 100, l: 1, w: 1, c: { top: "red" }});
          }

          //   setTimeout(draw, 10);
        }

        draw();
      });
    </script>
  </head>
  <body>
    <canvas id="canvas" style="border: black solid 1px"></canvas>
  </body>
</html>
