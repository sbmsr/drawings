<!DOCTYPE html>
<html>
  <head>
    <script type="text/javascript">
      document.addEventListener("DOMContentLoaded", () => {
        let canvas = document.getElementById("canvas");
        let ctx = canvas.getContext("2d");
        // Set canvas size
        canvas.width = 700;
        canvas.height = 700;

        // Apply isometric transformations
        ctx.scale(1, 0.5); // Scale height
        ctx.rotate((45 * Math.PI) / 180); // Rotate by 45 degrees
        ctx.translate(canvas.width, 11 * 20); // Move to center of canvas

        // Save the current context state
        ctx.save();

        function drawIsometricPlane() {
          // Reset the context state
          ctx.restore();
          ctx.save();
          // Clear the canvas
          ctx.clearRect(0, 0, canvas.width, canvas.height);

          // Draw vertical grid lines
          for (var x = -canvas.width * 2; x <= canvas.width * 2; x += 20) {
            ctx.beginPath();
            ctx.moveTo(x, -1000);
            ctx.lineTo(x, canvas.width + 1000);
            ctx.stroke();
          }

          // Draw horizontal grid lines
          for (var y = -canvas.height * 2; y <= canvas.height * 2; y += 20) {
            ctx.beginPath();
            ctx.moveTo(-1000, y);
            ctx.lineTo(canvas.height + 1000, y);
            ctx.stroke();
          }
        }

        function drawIsoRect({
          x = 0,
          y = 0,
          l = 1,
          w = 1,
          h = 1,
          c = { top: "rgba(0, 0, 255, 1)", left: "rgba(255, 0, 0, 1)", right: "rgba(0, 255, 0, 1)" },
        } = {}) {
          // Reset the context state
          ctx.restore();
          ctx.save();
          // draw top (blue)
          ctx.beginPath();
          ctx.moveTo(x, y); // top
          ctx.lineTo(x, y + 20 * l); // left
          ctx.lineTo(x + 20 * w, y + 20 * l); //bottom
          ctx.lineTo(x + 20 * w, y); // right
          ctx.closePath();
          ctx.fillStyle = c.top;
          ctx.fill();
          ctx.stroke();

          // draw left (red)
          ctx.beginPath();
          ctx.moveTo(x, y + 20 * l); // start at top left
          ctx.lineTo(x + 20 * h, y + 20 * l + 20 * h); // bottom-left
          ctx.lineTo(x + 20 * w + 20 * h, y + 20 * l + 20 * h); // Across to bottom-right
          ctx.lineTo(x + 20 * w, y + 20 * l); // Across to bottom-right
          ctx.closePath();
          ctx.fillStyle = c.left;
          ctx.fill();
          ctx.stroke();

            // draw right (green)
            ctx.beginPath();
            ctx.moveTo(x + 20 * w, y + 20 * l); // start at bottom of top face
            ctx.lineTo(x + 20 * w + h * 20, y + 20 * l+ h * 20); // go down
            ctx.lineTo(x + 20 * w + h * 20, y + 20 * h); // go up and right
            ctx.lineTo(x + 20 * w, y); // go to top-right
            ctx.closePath();
            ctx.fillStyle = c.right;
            ctx.fill();
            ctx.stroke();
        }

        function drawStool() {
          drawIsometricPlane();
          {
            drawIsoRect({ x: 60, y: 80, l: 1, w: 1, h: 4, c: { top: "white" } }); // back right leg
            drawIsoRect({ x: 60, y: 100, l: 2, w: 3, h: 1, c: { top: "white" } }); // right plank
            drawIsoRect({ x: 100, y: 140, l: 1, w: 1, h: 4, c: { top: "white" } }); // middle front leg
            drawIsoRect({ x: 60, y: 140, l: 1, w: 1, h: 4, c: { top: "white" } }); // middle back leg
            drawIsoRect({ x: 60, y: 160, l: 2, w: 3, h: 1, c: { top: "white" } }); // left plank
            drawIsoRect({ x: 120, y: 180, l: 1, w: 1, h: 4, c: { top: "white" } }); // left front leg
            drawIsoRect({ x: 120, y: 100, l: 1, w: 1, h: 4, c: { top: "white" } }); // right front leg
            drawIsoRect({ x: 60, y: 200, l: 1, w: 1, h: 4, c: { top: "white" } }); // left back leg
          }
        }

        drawStool();
      });
    </script>
  </head>
  <body>
    <canvas id="canvas" style="border: black solid 1px"></canvas>
  </body>
</html>
